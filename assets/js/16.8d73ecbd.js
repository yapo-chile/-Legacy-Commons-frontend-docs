(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{112:function(e,a,s){e.exports=s.p+"assets/img/bconf.977d94d2.png"},113:function(e,a,s){e.exports=s.p+"assets/img/componenteLocal.f925618c.png"},114:function(e,a,s){e.exports=s.p+"assets/img/bundle.06c260f6.png"},115:function(e,a,s){e.exports=s.p+"assets/img/confirmation2.07cabd29.png"},116:function(e,a,s){e.exports=s.p+"assets/img/confirmation.eda90a49.png"},117:function(e,a,s){e.exports=s.p+"assets/img/packages.50fde84c.png"},223:function(e,a,s){"use strict";s.r(a);var r=s(0),t=Object(r.a)({},function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"custom-elements"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#custom-elements","aria-hidden":"true"}},[e._v("#")]),e._v(" Custom Elements")]),e._v(" "),r("p",[e._v("Actualmente -28 de septiembre, 2020- en nuestro stack trabajamos Custom Elements en el proyecto de "),r("a",{attrs:{href:"https://github.mpi-internal.com/Yapo/yapo-widgets",target:"_blank",rel:"noopener noreferrer"}},[e._v("Yapo-Widgets"),r("OutboundLink")],1),e._v(", uno de los propositos de trabajar así es ir diviendo tareas y/o proyectos los cuales podrían replicarse en el sitio de Yapo, y al mismo tiempo no seguir desarrollando en regress.")]),e._v(" "),r("p",[e._v("Hasta el día de hoy se han trabajado los custom elements con librerías como swiss, haunted, atomic e inclusive se han combinado con Vanilla.")]),e._v(" "),r("h2",{attrs:{id:"como-crear-un-custom-element-en-el-repo-yapo-widgets"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#como-crear-un-custom-element-en-el-repo-yapo-widgets","aria-hidden":"true"}},[e._v("#")]),e._v(" Como crear un custom element en el repo yapo-widgets")]),e._v(" "),r("p",[e._v("En primera instancia se debe tener el repositorio de "),r("a",{attrs:{href:"https://github.mpi-internal.com/Yapo/yapo-widgets",target:"_blank",rel:"noopener noreferrer"}},[e._v("Yapo-Widgets"),r("OutboundLink")],1),e._v(" descargado de forma local.")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone git@github.mpi-internal.com:Yapo/yapo-widgets.git\n")])])]),r("p",[e._v("Dentro del repositorio se encontrara la carpeta packages que contiene todos los web components existentes -incluyendo los de experimentación-.")]),e._v(" "),r("p",[r("img",{attrs:{src:s(117),alt:"packages"}})]),e._v(" "),r("p",[e._v("Para crear un nuevo custom elements se debe -por ahora- copiar la carpeta de cualquier componente ya existente y volver a copiarla dentro de packages, haciendo el renombramiento correspondiente.\nDentro de la carpeta de los componentes se encontrara -en la mayoría de estas- lo necesario para:")]),e._v(" "),r("ul",[r("li",[e._v("Crear la funcionalidad requerida.")]),e._v(" "),r("li",[e._v("Hacer uso de los hooks -según la libreria que se este utilizando-.")]),e._v(" "),r("li",[e._v("Agregar el component a storybook.")]),e._v(" "),r("li",[e._v("Realizar los test correspondientes con Jest.")])]),e._v(" "),r("p",[e._v("Es necesario cumplir con todos los puntos mencionados anteriormente, ya que es la base para tener y mantener de una forma más fácil y correcta los componentes, al no tratarse de experimentos, pero, si se crean componentes para experimentación no es necesario agregar los test.")]),e._v(" "),r("h3",{attrs:{id:"como-crear-test"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#como-crear-test","aria-hidden":"true"}},[e._v("#")]),e._v(" Como crear test")]),e._v(" "),r("p",[e._v("Actualmente dentro de la carpeta de cada componente existe una carpeta llamada "),r("strong",[e._v("test")]),e._v(", dentro de esta se pueden crear los archivos necesarios para testear nuestro componente, trabajamos con la librería de jest.")]),e._v(" "),r("p",[e._v("Se puede visualizar la cobertura de nuestros test "),r("a",{attrs:{href:"https://quality-gate.mpi-internal.com/#/Yapo/yapo-widgets/3068676",target:"_blank",rel:"noopener noreferrer"}},[e._v("aquí"),r("OutboundLink")],1),e._v(". También se pueden ir ejecutando desde el terminal, situados en la carpeta de el componente se debe ejecutar")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("yarn unit\n")])])]),r("p",[e._v("Así se podrá verificar el estado de los test creados.")]),e._v(" "),r("h3",{attrs:{id:"como-agregar-el-componente-a-storybook"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#como-agregar-el-componente-a-storybook","aria-hidden":"true"}},[e._v("#")]),e._v(" Como agregar el componente a Storybook")]),e._v(" "),r("p",[e._v("Para documentar el componente en Storybook, se debe modificar, actualizar o crear el archivo README.md dentro de la carpeta de el componente.\nDonde se incorporarán datos como:")]),e._v(" "),r("ul",[r("li",[e._v("El nombre del componente.")]),e._v(" "),r("li",[e._v("Supported events.")]),e._v(" "),r("li",[e._v("Properties: propName, propType, defaultValue, isRequired.")]),e._v(" "),r("li",[e._v("Usage.")]),e._v(" "),r("li",[e._v("Instalation.")]),e._v(" "),r("li",[e._v("Build.")]),e._v(" "),r("li",[e._v("Entre otros.")])]),e._v(" "),r("p",[e._v("Para visualizar Storybook de manera local, y así visualizar los cambios que incorporamos, solo debemos ejecutar en el terminal situados en el root de nuestro proyecto:")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("yarn storybook\n")])])]),r("p",[e._v("Y en el terminal nos indicarán a que dirección ingresar.")]),e._v(" "),r("h2",{attrs:{id:"prerelease"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#prerelease","aria-hidden":"true"}},[e._v("#")]),e._v(" Prerelease")]),e._v(" "),r("p",[e._v("Para poder utilizar nuestro componente dentro de el repositorio de yapo, tenemos dos opciones: crear una prerelease o agregar el componente de manera local en regress.")]),e._v(" "),r("p",[e._v("Para crear la prerelease del componente, se debe estar situado en el root del proyecto y ejecutar desde la consola:")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("yarn lerna:prerelease\n")])])]),r("p",[e._v("Al realizar esto, en la misma consola nos dará una nueva versión de nuestro componente, en donde nos hara confirmar o negar esta acción. Al confirmarla se puede ir revisando los task en travis y si sale todo bien se podrá utilizar la versión indicada en regress.")]),e._v(" "),r("p",[r("img",{attrs:{src:s(116),alt:"confirmation"}}),e._v(" "),r("img",{attrs:{src:s(115),alt:"confirmation2"}})]),e._v(" "),r("div",{staticClass:"custom-block danger"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("OJO: por cada cambio que detecte lerna -en mas de un componente- este creara un tag, en este caso y actualmente, no es factible que se publique mas de 4 tag a la vez.")])]),e._v(" "),r("h3",{attrs:{id:"que-hacer-si-se-publica-mas-de-4-tag"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#que-hacer-si-se-publica-mas-de-4-tag","aria-hidden":"true"}},[e._v("#")]),e._v(" Que hacer si se publica mas de 4 tag?")]),e._v(" "),r("p",[e._v("Se deberá borrar los tag y se volverán a crear.")]),e._v(" "),r("ul",[r("li",[e._v("Eliminar el tag que se había creado en la prerelease; desde el root de nuestro proyecto, ejecutar en la consola:")])]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" push origin :nombreTag \n")])])]),r("ul",[r("li",[e._v("Volver a publicar el tag")])]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" push origin nombreTag\n")])])]),r("ul",[r("li",[e._v("Como se menciono con anterioridad cada estado del tag se puede ir revisando desde Travis.")])]),e._v(" "),r("h3",{attrs:{id:"agregar-el-componente-de-manera-local-en-regress"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#agregar-el-componente-de-manera-local-en-regress","aria-hidden":"true"}},[e._v("#")]),e._v(" Agregar el componente de manera local en regress")]),e._v(" "),r("p",[e._v("Se recomienda utilizar esta opción cuándo se tienen que realizar cambios menores en el componente.\nSituados en la carpeta de nuestro componente se debe ejecutar desde la terminal")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("yarn build\n")])])]),r("p",[e._v("Dentro de nuestra carpeta>dist, se encontrarán los archivos bundle.")]),e._v(" "),r("p",[r("img",{attrs:{src:s(114),alt:"bundle"}})]),e._v(" "),r("p",[e._v("Se recomienda utilizar el archivo bundle.module.js en vez de bundle.legacy.js ya que este último se tiende a caer.\nDentro de nuestro js deberemos copiar todo y pegarlo dentro de la consola, donde se quiere utilizar el componente y aparecerá.")]),e._v(" "),r("p",[e._v("Ejemplo:\n"),r("img",{attrs:{src:s(113),alt:"bundle"}})]),e._v(" "),r("p",[e._v("En el caso de que la consola nos de error por variables se puede customizar el código copiado:")]),e._v(" "),r("ul",[r("li",[e._v("En el inicio del código agregamos ( () => { antes de const")]),e._v(" "),r("li",[e._v("Finalizamos el archivo cerrando nuestra función anónima, }) ();")]),e._v(" "),r("li",[e._v("Borramos la línea de código // # sourceMappingURL=bundle.module.js.map")]),e._v(" "),r("li",[e._v("Guardamos y volvemos a pegar el contenido de el archivo .js en la consola.")])]),e._v(" "),r("h2",{attrs:{id:"implementacion-del-widget-a-regress"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#implementacion-del-widget-a-regress","aria-hidden":"true"}},[e._v("#")]),e._v(" Implementación del widget a regress")]),e._v(" "),r("p",[e._v("Actualmente en el repo de Yapo existe una bconf llamada bconf.txt.widgets, la cual se encuentra dentro de conf>common>bconf esta es una bconf global, en la que podemos según componente indicar el número de versión de este.")]),e._v(" "),r("p",[e._v("Al realizar la prerelease del componente este nos indico un número, como primer paso debemos agregar o actualizar el número de versión de nuestro componente en el archivo de bconf.")]),e._v(" "),r("p",[r("img",{attrs:{src:s(112),alt:"bconf"}})]),e._v(" "),r("p",[e._v("Como segundo paso debemos agregar nuestro widget al tmpl donde lo queremos implementar/utilizar.\nEntonces agregamos dos script en nuestro tmpl, ej:")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("script type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"module"')]),e._v(" charset"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"UTF-8"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\t"),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("import")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://widgets.yapo.cl/nombre-componente/<%'),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),e._v("widget_nombre.version"),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v('%>/bundle.module.js"')]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/script"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("script nomodule charset"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"UTF-8"')]),e._v(" src"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"//widgets.yapo.cl/nombre-componente/<%'),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),e._v("widget_nombre.version"),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v('%>/bundle.legacy.js"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/script"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),r("p",[e._v("Finalizamos agregando nuestro tag, ej:")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("da-detail\n    date"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("' 28 septiembre, 2020'")]),e._v("\n    product-title"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'titulo x'")]),e._v("\n    product-price"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'$ 291.000'")]),e._v("\n    product-cuota"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n    previous-price"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'12 UF'")]),e._v("\n    product-price-uf"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'10 UF'")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/da-detail"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),r("p",[e._v("Y con esto ya bastaría para que el componente creado se pueda visualizar correctamente.")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("Se pueden guíar por los componentes como: "),r("strong",[e._v("card-item, yapo-alert")]),e._v(".")])])])},[],!1,null,null,null);a.default=t.exports}}]);